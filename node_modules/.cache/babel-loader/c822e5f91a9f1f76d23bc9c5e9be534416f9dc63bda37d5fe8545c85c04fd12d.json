{"ast":null,"code":"var _jsxFileName = \"/Users/Christopher/info442_fork/src/component/Login.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport supabase from '../supabaseclient';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const handleLogin = async e => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n    const {\n      data,\n      error\n    } = await supabase.auth.signInWithPassword({\n      email: email,\n      password\n    });\n    if (error || !data || !data.user) {\n      setError((error === null || error === void 0 ? void 0 : error.message) || 'Login failed. Please check your credentials.');\n      setLoading(false);\n      console.error('Error logging in:', error === null || error === void 0 ? void 0 : error.message);\n      return;\n    }\n    const userId = data.user.id;\n    const {\n      data: profile,\n      error: profileError\n    } = await supabase.from('profiles').select('role').eq('id', userId).single();\n    if (profileError || !profile) {\n      setError((profileError === null || profileError === void 0 ? void 0 : profileError.message) || 'Failed to fetch user profile.');\n      setLoading(false);\n      return;\n    }\n    const role = profile.role;\n    if (role === 'caregiver') navigate('/caregiver');else if (role === 'family') navigate('/family');else if (role === 'elder') navigate('/elder');else {\n      setError('Invalid role');\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-left\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/logo.jpg\",\n          alt: \"Elder using tablet\",\n          className: \"image-container\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"bold-text\",\n          children: [\"Dedicated to enhancing \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 60\n          }, this), \"home care connections.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-right\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo-text\",\n        children: \"CareCircle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"login-box\",\n        onSubmit: handleLogin,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"login-text\",\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"login-header\",\n          children: \"Personalized Care\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"input-field\",\n          placeholder: \"Enter Account Email\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"input-field\",\n          placeholder: \"Password\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"login-button\",\n          type: \"submit\",\n          disabled: loading,\n          children: loading ? 'Logging in...' : 'Log in'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-text\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"vLkO+8Y2wSrbbXehzC1pSGBtJu0=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","supabase","useState","useNavigate","jsxDEV","_jsxDEV","LoginPage","_s","email","setEmail","password","setPassword","error","setError","loading","setLoading","navigate","handleLogin","e","preventDefault","data","auth","signInWithPassword","user","message","console","userId","id","profile","profileError","from","select","eq","single","role","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","disabled","_c","$RefreshReg$"],"sources":["/Users/Christopher/info442_fork/src/component/Login.jsx"],"sourcesContent":["import React from 'react';\nimport supabase from '../supabaseclient'; \nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Login.css';\n\nconst LoginPage = () => {\n    const[email, setEmail] = useState('');\n    const[password, setPassword] = useState('');\n    const[error, setError] = useState(null)\n    const [loading, setLoading] = useState(false);\n    const navigate = useNavigate(); \n\n    const handleLogin = async (e) => {  \n        e.preventDefault();\n        setError(null); \n        setLoading(true);\n      \n        const { data, error } = await supabase.auth.signInWithPassword({\n          email: email, \n          password\n        });\n      \n        if (error || !data || !data.user) {\n          setError(error?.message || 'Login failed. Please check your credentials.');\n          setLoading(false);\n          console.error('Error logging in:', error?.message);\n          return;\n        }\n      \n        const userId = data.user.id;\n      \n        const { data: profile, error: profileError } = await supabase\n          .from('profiles')\n          .select('role')\n          .eq('id', userId)\n          .single();\n      \n        if (profileError || !profile) {\n          setError(profileError?.message || 'Failed to fetch user profile.');\n          setLoading(false);\n          return;\n        }\n      \n        const role = profile.role;\n        if (role === 'caregiver') navigate('/caregiver');\n        else if (role === 'family') navigate('/family');\n        else if (role === 'elder') navigate('/elder');\n        else {\n          setError('Invalid role');\n          setLoading(false);\n        }\n      }\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-left\">\n        <div className=\"logo-wrapper\">\n          <img\n            src=\"/logo.jpg\"\n            alt=\"Elder using tablet\"\n            className=\"image-container\"\n          />\n          <h2 className=\"bold-text\">Dedicated to enhancing <br />home care connections.</h2>\n        </div>\n      </div>\n\n      <div className=\"login-right\">\n        <div className=\"logo-text\">CareCircle</div>\n\n        <form className=\"login-box\" onSubmit={handleLogin}>\n            <h2 className=\"login-text\">Log in</h2>\n            <p className=\"login-header\">Personalized Care</p>\n\n            <input\n                type=\"text\"\n                className=\"input-field\"\n                placeholder=\"Enter Account Email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                />\n            <input\n                type=\"password\"\n                className=\"input-field\"\n                placeholder=\"Password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n            />\n\n            <button className=\"login-button\" type=\"submit\" disabled={loading}>\n                {loading ? 'Logging in...' : 'Log in'}\n            </button>\n\n            {error && <p className=\"error-text\">{error}</p>}\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}