{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/Users/Christopher/info442_fork/src/component/chat.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from \"react\";\nimport { Mic, MicOff, Paperclip, Send, X, Wifi, WifiOff, Play, Pause } from \"lucide-react\";\n\n// Mock user data\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst currentUser = {\n  id: \"user1\",\n  name: \"Current User\",\n  role: \"elder\"\n};\n\n// Mock users for demo\nconst users = [{\n  id: \"user1\",\n  name: \"Martha Johnson\",\n  role: \"elder\"\n}, {\n  id: \"user2\",\n  name: \"Sarah Williams\",\n  role: \"caregiver\"\n}, {\n  id: \"user3\",\n  name: \"John Johnson\",\n  role: \"family\"\n}];\n\n// Mock initial messages\nconst initialMessages = [{\n  id: \"msg1\",\n  content: \"Good morning! How are you feeling today?\",\n  sender: {\n    id: \"user2\",\n    name: \"Sarah Williams\",\n    role: \"caregiver\"\n  },\n  timestamp: new Date(Date.now() - 3600000),\n  // 1 hour ago\n  type: \"text\",\n  reactions: []\n}, {\n  id: \"msg2\",\n  content: \"I'm feeling much better today, thank you!\",\n  sender: {\n    id: \"user1\",\n    name: \"Martha Johnson\",\n    role: \"elder\"\n  },\n  timestamp: new Date(Date.now() - 3500000),\n  // 58 minutes ago\n  type: \"text\",\n  reactions: [{\n    emoji: \"👍\",\n    user: \"Sarah Williams\"\n  }]\n}, {\n  id: \"msg3\",\n  content: \"voice-message.mp3\",\n  sender: {\n    id: \"user3\",\n    name: \"John Johnson\",\n    role: \"family\"\n  },\n  timestamp: new Date(Date.now() - 1800000),\n  // 30 minutes ago\n  type: \"voice\",\n  reactions: [],\n  duration: 12 // 12 seconds\n}, {\n  id: \"msg4\",\n  content: \"Morning medication administered\",\n  sender: {\n    id: \"user2\",\n    name: \"Sarah Williams\",\n    role: \"caregiver\"\n  },\n  timestamp: new Date(Date.now() - 900000),\n  // 15 minutes ago\n  type: \"update\",\n  reactions: []\n}];\n\n// Available emoji reactions\nconst availableEmojis = [\"👍\", \"❤️\", \"😊\", \"👏\", \"🙏\", \"😢\"];\nexport default function Chat() {\n  _s();\n  // State for messages\n  const [messages, setMessages] = useState(initialMessages);\n  const [draftMessage, setDraftMessage] = useState(\"\");\n  const [isOnline, setIsOnline] = useState(true);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingDuration, setRecordingDuration] = useState(0);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(null);\n\n  // Refs\n  const fileInputRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const messagesEndRef = useRef(null);\n  const recordingTimerRef = useRef(null);\n\n  // Scroll to bottom when messages change\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  // Save draft message to localStorage\n  useEffect(() => {\n    if (draftMessage) {\n      localStorage.setItem(\"chatDraftMessage\", draftMessage);\n    }\n  }, [draftMessage]);\n\n  // Load draft message from localStorage\n  useEffect(() => {\n    const savedDraft = localStorage.getItem(\"chatDraftMessage\");\n    if (savedDraft) {\n      setDraftMessage(savedDraft);\n    }\n  }, []);\n\n  // Check online status\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n    window.addEventListener(\"online\", handleOnline);\n    window.addEventListener(\"offline\", handleOffline);\n    return () => {\n      window.removeEventListener(\"online\", handleOnline);\n      window.removeEventListener(\"offline\", handleOffline);\n    };\n  }, []);\n\n  // Handle recording timer\n  useEffect(() => {\n    if (isRecording) {\n      recordingTimerRef.current = setInterval(() => {\n        setRecordingDuration(prev => prev + 1);\n      }, 1000);\n    } else {\n      if (recordingTimerRef.current) {\n        clearInterval(recordingTimerRef.current);\n        recordingTimerRef.current = null;\n      }\n      setRecordingDuration(0);\n    }\n    return () => {\n      if (recordingTimerRef.current) {\n        clearInterval(recordingTimerRef.current);\n      }\n    };\n  }, [isRecording]);\n\n  // Format time for voice messages\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs < 10 ? \"0\" : \"\"}${secs}`;\n  };\n\n  // Handle send message\n  const handleSendMessage = () => {\n    if (!isOnline) {\n      alert(\"You are offline. Your message will be sent when you reconnect to the internet.\");\n      return;\n    }\n    if (draftMessage.trim() || selectedFile) {\n      const newMessage = {\n        id: `msg${Date.now()}`,\n        content: selectedFile ? selectedFile.name : draftMessage,\n        sender: currentUser,\n        timestamp: new Date(),\n        type: selectedFile ? \"file\" : \"text\",\n        reactions: [],\n        fileType: selectedFile === null || selectedFile === void 0 ? void 0 : selectedFile.type,\n        fileName: selectedFile === null || selectedFile === void 0 ? void 0 : selectedFile.name\n      };\n      setMessages(prev => [...prev, newMessage]);\n      setDraftMessage(\"\");\n      setSelectedFile(null);\n      localStorage.removeItem(\"chatDraftMessage\");\n    }\n  };\n\n  // Handle voice recording\n  const toggleRecording = () => {\n    if (isRecording) {\n      stopRecording();\n    } else {\n      startRecording();\n    }\n  };\n  const startRecording = () => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        audio: true\n      }).then(stream => {\n        const mediaRecorder = new MediaRecorder(stream);\n        mediaRecorderRef.current = mediaRecorder;\n        audioChunksRef.current = [];\n        mediaRecorder.addEventListener(\"dataavailable\", event => {\n          audioChunksRef.current.push(event.data);\n        });\n        mediaRecorder.addEventListener(\"stop\", () => {\n          const audioBlob = new Blob(audioChunksRef.current, {\n            type: \"audio/wav\"\n          });\n          // In a real app, you would upload this blob to a server and get a URL\n          // For demo purposes, we'll just create a fake voice message\n          const newMessage = {\n            id: `msg${Date.now()}`,\n            content: \"voice-message.wav\",\n            sender: currentUser,\n            timestamp: new Date(),\n            type: \"voice\",\n            reactions: [],\n            duration: recordingDuration\n          };\n          setMessages(prev => [...prev, newMessage]);\n        });\n        mediaRecorder.start();\n        setIsRecording(true);\n      }).catch(error => {\n        console.error(\"Error accessing microphone:\", error);\n        alert(\"Could not access your microphone. Please check permissions.\");\n      });\n    } else {\n      alert(\"Your browser does not support voice recording.\");\n    }\n  };\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== \"inactive\") {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n\n      // Stop all audio tracks\n      if (mediaRecorderRef.current.stream) {\n        mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n      }\n    }\n  };\n\n  // Handle file selection\n  const handleFileSelect = () => {\n    var _fileInputRef$current;\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const handleFileChange = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (file) {\n      setSelectedFile(file);\n    }\n  };\n\n  // Handle emoji reactions\n  const toggleEmojiPicker = messageId => {\n    setShowEmojiPicker(showEmojiPicker === messageId ? null : messageId);\n  };\n  const addReaction = (messageId, emoji) => {\n    setMessages(prev => prev.map(msg => {\n      if (msg.id === messageId) {\n        // Check if user already reacted with this emoji\n        const existingReaction = msg.reactions.find(r => r.user === currentUser.name && r.emoji === emoji);\n        if (existingReaction) {\n          // Remove the reaction if it already exists\n          return {\n            ...msg,\n            reactions: msg.reactions.filter(r => !(r.user === currentUser.name && r.emoji === emoji))\n          };\n        } else {\n          // Add the new reaction\n          return {\n            ...msg,\n            reactions: [...msg.reactions.filter(r => r.user !== currentUser.name),\n            // Remove any existing reaction from this user\n            {\n              emoji,\n              user: currentUser.name\n            }]\n          };\n        }\n      }\n      return msg;\n    }));\n    setShowEmojiPicker(null);\n  };\n\n  // Handle voice message playback\n  const togglePlayVoiceMessage = messageId => {\n    if (isPlaying === messageId) {\n      setIsPlaying(null);\n      // In a real app, you would pause the audio playback here\n    } else {\n      setIsPlaying(messageId);\n      // In a real app, you would play the audio here\n\n      // Simulate playback ending after the duration\n      const message = messages.find(m => m.id === messageId);\n      if (message && message.duration) {\n        setTimeout(() => {\n          setIsPlaying(null);\n        }, message.duration * 1000);\n      }\n    }\n  };\n\n  // Get bubble color based on user role\n  const getBubbleColor = role => {\n    switch (role) {\n      case \"elder\":\n        return \"bg-sky-100 text-sky-800\";\n      case \"caregiver\":\n        return \"bg-rose-100 text-rose-800\";\n      case \"family\":\n        return \"bg-emerald-100 text-emerald-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  // Get sender name color based on user role\n  const getSenderColor = role => {\n    switch (role) {\n      case \"elder\":\n        return \"text-sky-600\";\n      case \"caregiver\":\n        return \"text-rose-600\";\n      case \"family\":\n        return \"text-emerald-600\";\n      default:\n        return \"text-gray-600\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-medium text-gray-800\",\n        children: \"Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [isOnline ? /*#__PURE__*/_jsxDEV(Wifi, {\n          className: \"h-4 w-4 text-green-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 23\n        }, this) : /*#__PURE__*/_jsxDEV(WifiOff, {\n          className: \"h-4 w-4 text-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 69\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `ml-2 text-sm ${isOnline ? \"text-green-500\" : \"text-red-500\"}`,\n          children: isOnline ? \"Online\" : \"Offline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 p-4 overflow-y-auto bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-baseline mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: `font-medium ${getSenderColor(message.sender.role)}`,\n                children: message.sender.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 text-xs text-gray-500\",\n                children: message.timestamp.toLocaleTimeString([], {\n                  hour: \"2-digit\",\n                  minute: \"2-digit\"\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `relative rounded-lg p-3 ${getBubbleColor(message.sender.role)} ${message.type === \"update\" ? \"italic bg-gray-100 text-gray-700\" : \"\"}`,\n              children: [message.type === \"text\" && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: message.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 47\n              }, this), message.type === \"voice\" && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"flex items-center gap-2 py-1\",\n                onClick: () => togglePlayVoiceMessage(message.id),\n                children: [isPlaying === message.id ? /*#__PURE__*/_jsxDEV(Pause, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 51\n                }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 83\n                }, this), /*#__PURE__*/_jsxDEV(Mic, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: formatTime(message.duration || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 21\n              }, this), message.type === \"file\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Paperclip, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"underline\",\n                  children: message.fileName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 21\n              }, this), message.reactions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute -top-2 -right-2 flex gap-1 bg-white rounded-full px-2 py-1 shadow-sm border border-gray-200\",\n                children: message.reactions.map((reaction, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm\",\n                  title: `${reaction.user}`,\n                  children: reaction.emoji\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"absolute right-0 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white rounded-full p-1 shadow-sm border border-gray-200\",\n            onClick: () => toggleEmojiPicker(message.id),\n            children: message.reactions.some(r => r.user === currentUser.name) ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm\",\n              children: \"\\uD83D\\uDE00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-gray-400\",\n              children: \"\\uD83D\\uDE36\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this), showEmojiPicker === message.id && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute right-8 top-1/2 -translate-y-1/2 bg-white rounded-full px-2 py-1 shadow-md border border-gray-200 flex gap-1 z-10\",\n            children: availableEmojis.map(emoji => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"hover:bg-gray-100 rounded-full p-1 transition-colors\",\n              onClick: () => addReaction(message.id, emoji),\n              children: emoji\n            }, emoji, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 17\n          }, this)]\n        }, message.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-t border-gray-200 bg-white\",\n      children: [selectedFile && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2 p-2 bg-gray-100 rounded-lg flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 truncate\",\n          children: [/*#__PURE__*/_jsxDEV(Paperclip, {\n            className: \"h-4 w-4 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm truncate\",\n            children: selectedFile.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"text-gray-500 hover:text-gray-700\",\n          onClick: () => setSelectedFile(null),\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `p-2 rounded-full ${isRecording ? \"bg-red-500 text-white animate-pulse\" : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"}`,\n          onClick: toggleRecording,\n          children: isRecording ? /*#__PURE__*/_jsxDEV(MicOff, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 61\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200\",\n          onClick: handleFileSelect,\n          children: /*#__PURE__*/_jsxDEV(Paperclip, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          className: \"hidden\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"flex-1 p-2 border border-gray-300 rounded-lg\",\n          placeholder: \"Type your message...\",\n          value: draftMessage,\n          onChange: e => setDraftMessage(e.target.value),\n          onKeyDown: e => {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n              e.preventDefault();\n              handleSendMessage();\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 rounded-full bg-sky-500 text-white hover:bg-sky-600 disabled:opacity-50 disabled:cursor-not-allowed\",\n          onClick: handleSendMessage,\n          disabled: !draftMessage.trim() && !selectedFile || isRecording,\n          children: /*#__PURE__*/_jsxDEV(Send, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 text-center text-sm text-red-500 animate-pulse\",\n        children: [\"Recording... \", formatTime(recordingDuration)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 11\n      }, this), !isOnline && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 text-center text-sm text-red-500\",\n        children: \"You are offline. Messages will be sent when you reconnect.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"xBADL2rruED0/qJFKmiGX8Qdptw=\");\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useRef","useEffect","Mic","MicOff","Paperclip","Send","X","Wifi","WifiOff","Play","Pause","jsxDEV","_jsxDEV","currentUser","id","name","role","users","initialMessages","content","sender","timestamp","Date","now","type","reactions","emoji","user","duration","availableEmojis","Chat","messages","setMessages","draftMessage","setDraftMessage","isOnline","setIsOnline","isRecording","setIsRecording","recordingDuration","setRecordingDuration","selectedFile","setSelectedFile","showEmojiPicker","setShowEmojiPicker","isPlaying","setIsPlaying","fileInputRef","mediaRecorderRef","audioChunksRef","messagesEndRef","recordingTimerRef","_messagesEndRef$curre","current","scrollIntoView","behavior","localStorage","setItem","savedDraft","getItem","handleOnline","handleOffline","window","addEventListener","removeEventListener","setInterval","prev","clearInterval","formatTime","seconds","mins","Math","floor","secs","handleSendMessage","alert","trim","newMessage","fileType","fileName","removeItem","toggleRecording","stopRecording","startRecording","navigator","mediaDevices","getUserMedia","audio","then","stream","mediaRecorder","MediaRecorder","event","push","data","audioBlob","Blob","start","catch","error","console","state","stop","getTracks","forEach","track","handleFileSelect","_fileInputRef$current","click","handleFileChange","e","_e$target$files","file","target","files","toggleEmojiPicker","messageId","addReaction","map","msg","existingReaction","find","r","filter","togglePlayVoiceMessage","message","m","setTimeout","getBubbleColor","getSenderColor","className","children","lineNumber","columnNumber","toLocaleTimeString","hour","minute","onClick","length","reaction","index","title","some","ref","onChange","placeholder","value","onKeyDown","key","shiftKey","preventDefault","disabled","_c","$RefreshReg$"],"sources":["/Users/Christopher/info442_fork/src/component/chat.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { Mic, MicOff, Paperclip, Send, X, Wifi, WifiOff, Play, Pause } from \"lucide-react\"\n\n// Mock user data\nconst currentUser = {\n  id: \"user1\",\n  name: \"Current User\",\n  role: \"elder\",\n}\n\n// Mock users for demo\nconst users = [\n  {\n    id: \"user1\",\n    name: \"Martha Johnson\",\n    role: \"elder\",\n  },\n  {\n    id: \"user2\",\n    name: \"Sarah Williams\",\n    role: \"caregiver\",\n  },\n  {\n    id: \"user3\",\n    name: \"John Johnson\",\n    role: \"family\",\n  },\n]\n\n// Mock initial messages\nconst initialMessages = [\n  {\n    id: \"msg1\",\n    content: \"Good morning! How are you feeling today?\",\n    sender: {\n      id: \"user2\",\n      name: \"Sarah Williams\",\n      role: \"caregiver\",\n    },\n    timestamp: new Date(Date.now() - 3600000), // 1 hour ago\n    type: \"text\",\n    reactions: [],\n  },\n  {\n    id: \"msg2\",\n    content: \"I'm feeling much better today, thank you!\",\n    sender: {\n      id: \"user1\",\n      name: \"Martha Johnson\",\n      role: \"elder\",\n    },\n    timestamp: new Date(Date.now() - 3500000), // 58 minutes ago\n    type: \"text\",\n    reactions: [\n      {\n        emoji: \"👍\",\n        user: \"Sarah Williams\",\n      },\n    ],\n  },\n  {\n    id: \"msg3\",\n    content: \"voice-message.mp3\",\n    sender: {\n      id: \"user3\",\n      name: \"John Johnson\",\n      role: \"family\",\n    },\n    timestamp: new Date(Date.now() - 1800000), // 30 minutes ago\n    type: \"voice\",\n    reactions: [],\n    duration: 12, // 12 seconds\n  },\n  {\n    id: \"msg4\",\n    content: \"Morning medication administered\",\n    sender: {\n      id: \"user2\",\n      name: \"Sarah Williams\",\n      role: \"caregiver\",\n    },\n    timestamp: new Date(Date.now() - 900000), // 15 minutes ago\n    type: \"update\",\n    reactions: [],\n  },\n]\n\n// Available emoji reactions\nconst availableEmojis = [\"👍\", \"❤️\", \"😊\", \"👏\", \"🙏\", \"😢\"]\n\nexport default function Chat() {\n  // State for messages\n  const [messages, setMessages] = useState(initialMessages)\n  const [draftMessage, setDraftMessage] = useState(\"\")\n  const [isOnline, setIsOnline] = useState(true)\n  const [isRecording, setIsRecording] = useState(false)\n  const [recordingDuration, setRecordingDuration] = useState(0)\n  const [selectedFile, setSelectedFile] = useState(null)\n  const [showEmojiPicker, setShowEmojiPicker] = useState(null)\n  const [isPlaying, setIsPlaying] = useState(null)\n\n  // Refs\n  const fileInputRef = useRef(null)\n  const mediaRecorderRef = useRef(null)\n  const audioChunksRef = useRef([])\n  const messagesEndRef = useRef(null)\n  const recordingTimerRef = useRef(null)\n\n  // Scroll to bottom when messages change\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }, [messages])\n\n  // Save draft message to localStorage\n  useEffect(() => {\n    if (draftMessage) {\n      localStorage.setItem(\"chatDraftMessage\", draftMessage)\n    }\n  }, [draftMessage])\n\n  // Load draft message from localStorage\n  useEffect(() => {\n    const savedDraft = localStorage.getItem(\"chatDraftMessage\")\n    if (savedDraft) {\n      setDraftMessage(savedDraft)\n    }\n  }, [])\n\n  // Check online status\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true)\n    const handleOffline = () => setIsOnline(false)\n\n    window.addEventListener(\"online\", handleOnline)\n    window.addEventListener(\"offline\", handleOffline)\n\n    return () => {\n      window.removeEventListener(\"online\", handleOnline)\n      window.removeEventListener(\"offline\", handleOffline)\n    }\n  }, [])\n\n  // Handle recording timer\n  useEffect(() => {\n    if (isRecording) {\n      recordingTimerRef.current = setInterval(() => {\n        setRecordingDuration((prev) => prev + 1)\n      }, 1000)\n    } else {\n      if (recordingTimerRef.current) {\n        clearInterval(recordingTimerRef.current)\n        recordingTimerRef.current = null\n      }\n      setRecordingDuration(0)\n    }\n\n    return () => {\n      if (recordingTimerRef.current) {\n        clearInterval(recordingTimerRef.current)\n      }\n    }\n  }, [isRecording])\n\n  // Format time for voice messages\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60)\n    const secs = seconds % 60\n    return `${mins}:${secs < 10 ? \"0\" : \"\"}${secs}`\n  }\n\n  // Handle send message\n  const handleSendMessage = () => {\n    if (!isOnline) {\n      alert(\"You are offline. Your message will be sent when you reconnect to the internet.\")\n      return\n    }\n\n    if (draftMessage.trim() || selectedFile) {\n      const newMessage = {\n        id: `msg${Date.now()}`,\n        content: selectedFile ? selectedFile.name : draftMessage,\n        sender: currentUser,\n        timestamp: new Date(),\n        type: selectedFile ? \"file\" : \"text\",\n        reactions: [],\n        fileType: selectedFile?.type,\n        fileName: selectedFile?.name,\n      }\n\n      setMessages((prev) => [...prev, newMessage])\n      setDraftMessage(\"\")\n      setSelectedFile(null)\n      localStorage.removeItem(\"chatDraftMessage\")\n    }\n  }\n\n  // Handle voice recording\n  const toggleRecording = () => {\n    if (isRecording) {\n      stopRecording()\n    } else {\n      startRecording()\n    }\n  }\n\n  const startRecording = () => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices\n        .getUserMedia({ audio: true })\n        .then((stream) => {\n          const mediaRecorder = new MediaRecorder(stream)\n          mediaRecorderRef.current = mediaRecorder\n          audioChunksRef.current = []\n\n          mediaRecorder.addEventListener(\"dataavailable\", (event) => {\n            audioChunksRef.current.push(event.data)\n          })\n\n          mediaRecorder.addEventListener(\"stop\", () => {\n            const audioBlob = new Blob(audioChunksRef.current, { type: \"audio/wav\" })\n            // In a real app, you would upload this blob to a server and get a URL\n            // For demo purposes, we'll just create a fake voice message\n            const newMessage = {\n              id: `msg${Date.now()}`,\n              content: \"voice-message.wav\",\n              sender: currentUser,\n              timestamp: new Date(),\n              type: \"voice\",\n              reactions: [],\n              duration: recordingDuration,\n            }\n\n            setMessages((prev) => [...prev, newMessage])\n          })\n\n          mediaRecorder.start()\n          setIsRecording(true)\n        })\n        .catch((error) => {\n          console.error(\"Error accessing microphone:\", error)\n          alert(\"Could not access your microphone. Please check permissions.\")\n        })\n    } else {\n      alert(\"Your browser does not support voice recording.\")\n    }\n  }\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== \"inactive\") {\n      mediaRecorderRef.current.stop()\n      setIsRecording(false)\n\n      // Stop all audio tracks\n      if (mediaRecorderRef.current.stream) {\n        mediaRecorderRef.current.stream.getTracks().forEach((track) => track.stop())\n      }\n    }\n  }\n\n  // Handle file selection\n  const handleFileSelect = () => {\n    fileInputRef.current?.click()\n  }\n\n  const handleFileChange = (e) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      setSelectedFile(file)\n    }\n  }\n\n  // Handle emoji reactions\n  const toggleEmojiPicker = (messageId) => {\n    setShowEmojiPicker(showEmojiPicker === messageId ? null : messageId)\n  }\n\n  const addReaction = (messageId, emoji) => {\n    setMessages((prev) =>\n      prev.map((msg) => {\n        if (msg.id === messageId) {\n          // Check if user already reacted with this emoji\n          const existingReaction = msg.reactions.find((r) => r.user === currentUser.name && r.emoji === emoji)\n\n          if (existingReaction) {\n            // Remove the reaction if it already exists\n            return {\n              ...msg,\n              reactions: msg.reactions.filter((r) => !(r.user === currentUser.name && r.emoji === emoji)),\n            }\n          } else {\n            // Add the new reaction\n            return {\n              ...msg,\n              reactions: [\n                ...msg.reactions.filter((r) => r.user !== currentUser.name), // Remove any existing reaction from this user\n                { emoji, user: currentUser.name },\n              ],\n            }\n          }\n        }\n        return msg\n      }),\n    )\n    setShowEmojiPicker(null)\n  }\n\n  // Handle voice message playback\n  const togglePlayVoiceMessage = (messageId) => {\n    if (isPlaying === messageId) {\n      setIsPlaying(null)\n      // In a real app, you would pause the audio playback here\n    } else {\n      setIsPlaying(messageId)\n      // In a real app, you would play the audio here\n\n      // Simulate playback ending after the duration\n      const message = messages.find((m) => m.id === messageId)\n      if (message && message.duration) {\n        setTimeout(() => {\n          setIsPlaying(null)\n        }, message.duration * 1000)\n      }\n    }\n  }\n\n  // Get bubble color based on user role\n  const getBubbleColor = (role) => {\n    switch (role) {\n      case \"elder\":\n        return \"bg-sky-100 text-sky-800\"\n      case \"caregiver\":\n        return \"bg-rose-100 text-rose-800\"\n      case \"family\":\n        return \"bg-emerald-100 text-emerald-800\"\n      default:\n        return \"bg-gray-100 text-gray-800\"\n    }\n  }\n\n  // Get sender name color based on user role\n  const getSenderColor = (role) => {\n    switch (role) {\n      case \"elder\":\n        return \"text-sky-600\"\n      case \"caregiver\":\n        return \"text-rose-600\"\n      case \"family\":\n        return \"text-emerald-600\"\n      default:\n        return \"text-gray-600\"\n    }\n  }\n\n  return (\n    <div className=\"flex flex-col h-full bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\">\n      {/* Chat Header */}\n      <div className=\"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50\">\n        <h2 className=\"text-lg font-medium text-gray-800\">Chat</h2>\n        <div className=\"flex items-center\">\n          {isOnline ? <Wifi className=\"h-4 w-4 text-green-500\" /> : <WifiOff className=\"h-4 w-4 text-red-500\" />}\n          <span className={`ml-2 text-sm ${isOnline ? \"text-green-500\" : \"text-red-500\"}`}>\n            {isOnline ? \"Online\" : \"Offline\"}\n          </span>\n        </div>\n      </div>\n\n      {/* Messages Container */}\n      <div className=\"flex-1 p-4 overflow-y-auto bg-gray-50\">\n        <div className=\"space-y-4\">\n          {messages.map((message) => (\n            <div key={message.id} className=\"relative group\">\n              <div className=\"flex flex-col\">\n                <div className=\"flex items-baseline mb-1\">\n                  <span className={`font-medium ${getSenderColor(message.sender.role)}`}>{message.sender.name}</span>\n                  <span className=\"ml-2 text-xs text-gray-500\">\n                    {message.timestamp.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })}\n                  </span>\n                </div>\n\n                <div\n                  className={`relative rounded-lg p-3 ${getBubbleColor(message.sender.role)} ${\n                    message.type === \"update\" ? \"italic bg-gray-100 text-gray-700\" : \"\"\n                  }`}\n                >\n                  {message.type === \"text\" && <p>{message.content}</p>}\n\n                  {message.type === \"voice\" && (\n                    <button className=\"flex items-center gap-2 py-1\" onClick={() => togglePlayVoiceMessage(message.id)}>\n                      {isPlaying === message.id ? <Pause className=\"h-5 w-5\" /> : <Play className=\"h-5 w-5\" />}\n                      <Mic className=\"h-5 w-5\" />\n                      <span>{formatTime(message.duration || 0)}</span>\n                    </button>\n                  )}\n\n                  {message.type === \"file\" && (\n                    <div className=\"flex items-center gap-2\">\n                      <Paperclip className=\"h-5 w-5\" />\n                      <span className=\"underline\">{message.fileName}</span>\n                    </div>\n                  )}\n\n                  {/* Emoji reactions */}\n                  {message.reactions.length > 0 && (\n                    <div className=\"absolute -top-2 -right-2 flex gap-1 bg-white rounded-full px-2 py-1 shadow-sm border border-gray-200\">\n                      {message.reactions.map((reaction, index) => (\n                        <div key={index} className=\"text-sm\" title={`${reaction.user}`}>\n                          {reaction.emoji}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Emoji reaction button */}\n              <button\n                className=\"absolute right-0 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white rounded-full p-1 shadow-sm border border-gray-200\"\n                onClick={() => toggleEmojiPicker(message.id)}\n              >\n                {message.reactions.some((r) => r.user === currentUser.name) ? (\n                  <span className=\"text-sm\">😀</span>\n                ) : (\n                  <span className=\"text-sm text-gray-400\">😶</span>\n                )}\n              </button>\n\n              {/* Emoji picker */}\n              {showEmojiPicker === message.id && (\n                <div className=\"absolute right-8 top-1/2 -translate-y-1/2 bg-white rounded-full px-2 py-1 shadow-md border border-gray-200 flex gap-1 z-10\">\n                  {availableEmojis.map((emoji) => (\n                    <button\n                      key={emoji}\n                      className=\"hover:bg-gray-100 rounded-full p-1 transition-colors\"\n                      onClick={() => addReaction(message.id, emoji)}\n                    >\n                      {emoji}\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n          ))}\n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n\n      {/* Input Area */}\n      <div className=\"p-4 border-t border-gray-200 bg-white\">\n        {selectedFile && (\n          <div className=\"mb-2 p-2 bg-gray-100 rounded-lg flex items-center justify-between\">\n            <div className=\"flex items-center gap-2 truncate\">\n              <Paperclip className=\"h-4 w-4 text-gray-500\" />\n              <span className=\"text-sm truncate\">{selectedFile.name}</span>\n            </div>\n            <button className=\"text-gray-500 hover:text-gray-700\" onClick={() => setSelectedFile(null)}>\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n        )}\n\n        <div className=\"flex items-center gap-2\">\n          <button\n            className={`p-2 rounded-full ${\n              isRecording ? \"bg-red-500 text-white animate-pulse\" : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n            }`}\n            onClick={toggleRecording}\n          >\n            {isRecording ? <MicOff className=\"h-5 w-5\" /> : <Mic className=\"h-5 w-5\" />}\n          </button>\n\n          <button className=\"p-2 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200\" onClick={handleFileSelect}>\n            <Paperclip className=\"h-5 w-5\" />\n          </button>\n\n          <input type=\"file\" ref={fileInputRef} className=\"hidden\" onChange={handleFileChange} />\n\n          <input\n            type=\"text\"\n            className=\"flex-1 p-2 border border-gray-300 rounded-lg\"\n            placeholder=\"Type your message...\"\n            value={draftMessage}\n            onChange={(e) => setDraftMessage(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                e.preventDefault()\n                handleSendMessage()\n              }\n            }}\n          />\n\n          <button\n            className=\"p-2 rounded-full bg-sky-500 text-white hover:bg-sky-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n            onClick={handleSendMessage}\n            disabled={(!draftMessage.trim() && !selectedFile) || isRecording}\n          >\n            <Send className=\"h-5 w-5\" />\n          </button>\n        </div>\n\n        {isRecording && (\n          <div className=\"mt-2 text-center text-sm text-red-500 animate-pulse\">\n            Recording... {formatTime(recordingDuration)}\n          </div>\n        )}\n\n        {!isOnline && (\n          <div className=\"mt-2 text-center text-sm text-red-500\">\n            You are offline. Messages will be sent when you reconnect.\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}